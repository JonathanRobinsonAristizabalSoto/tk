-- Eliminar la base de datos si existe
DROP DATABASE IF EXISTS ticketpro;

-- Crear la base de datos
CREATE DATABASE IF NOT EXISTS ticketpro;
USE ticketpro;

-- Tabla de roles
CREATE TABLE roles (
    id_rol INT PRIMARY KEY AUTO_INCREMENT,
    nombre ENUM('Administrador', 'Soporte', 'Usuario') NOT NULL UNIQUE,
    descripcion TEXT,
    estado ENUM('Activo', 'Inactivo') NOT NULL DEFAULT 'Activo',
    eliminado BOOLEAN NOT NULL DEFAULT 0,
    fecha_creacion DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    fecha_actualizacion DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- Tabla de permisos
CREATE TABLE permisos (
    id_permiso INT PRIMARY KEY AUTO_INCREMENT,
    nombre VARCHAR(255) NOT NULL UNIQUE,
    descripcion TEXT,
    eliminado BOOLEAN NOT NULL DEFAULT 0,
    fecha_creacion DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    fecha_actualizacion DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- Tabla intermedia rolpermisos
CREATE TABLE rolpermisos (
    id_rol INT,
    id_permiso INT,
    fecha_asignacion DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    eliminado BOOLEAN NOT NULL DEFAULT 0,
    PRIMARY KEY (id_rol, id_permiso),
    FOREIGN KEY (id_rol) REFERENCES roles(id_rol) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (id_permiso) REFERENCES permisos(id_permiso) ON DELETE CASCADE ON UPDATE CASCADE
);

-- Tabla de usuarios
CREATE TABLE usuarios (
    id_usuario INT AUTO_INCREMENT PRIMARY KEY,
    tipo_documento ENUM('CC', 'TI', 'CE', 'PS', 'DNI', 'NIT') NOT NULL,
    documento VARCHAR(255) NOT NULL UNIQUE,
    nombre VARCHAR(255) NOT NULL,
    apellido VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL UNIQUE,
    telefono VARCHAR(20),
    departamento VARCHAR(255),
    municipio VARCHAR(255),
    foto VARCHAR(255),
    password VARCHAR(255) NOT NULL,
    id_rol INT NOT NULL,
    estado ENUM('Activo', 'Inactivo') NOT NULL DEFAULT 'Activo',
    email_verificado BOOLEAN NOT NULL DEFAULT 0,
    token_verificacion VARCHAR(255),
    codigo_recuperacion VARCHAR(10) DEFAULT NULL,
    eliminado BOOLEAN NOT NULL DEFAULT 0,
    fecha_registro DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    fecha_actualizacion DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX (email),
    INDEX (documento),
    FOREIGN KEY (id_rol) REFERENCES roles(id_rol) ON DELETE CASCADE ON UPDATE CASCADE
);

-- Tabla de tipologias (ajustada: campo 'nombre' en vez de 'tipologia')
CREATE TABLE tipologias (
    id_tipologia INT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(255) NOT NULL,
    descripcion TEXT,
    id_rol INT,
    estado_tipologia ENUM('Activo', 'Inactivo') NOT NULL DEFAULT 'Activo',
    eliminado BOOLEAN NOT NULL DEFAULT 0,
    fecha_creacion DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    fecha_actualizacion DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (id_rol) REFERENCES roles(id_rol) ON DELETE SET NULL ON UPDATE CASCADE
);

-- Tabla de subtipologias
CREATE TABLE subtipologias (
    id_subtipologia INT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(255) NOT NULL,
    descripcion TEXT,
    id_tipologia INT NOT NULL,
    estado ENUM('Activo', 'Inactivo') NOT NULL DEFAULT 'Activo',
    eliminado BOOLEAN NOT NULL DEFAULT 0,
    fecha_creacion DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    fecha_actualizacion DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (id_tipologia) REFERENCES tipologias(id_tipologia) ON DELETE CASCADE ON UPDATE CASCADE
);

-- Tabla de programas
CREATE TABLE programas (
    id_programa INT AUTO_INCREMENT PRIMARY KEY,
    codigo VARCHAR(50) NOT NULL,
    version VARCHAR(50) NOT NULL,
    nombre VARCHAR(255) NOT NULL UNIQUE,
    descripcion TEXT,
    duracion INT NOT NULL,
    linea_tecnologica VARCHAR(255) NOT NULL,
    red_tecnologica VARCHAR(255) NOT NULL,
    red_de_conocimiento VARCHAR(255) NOT NULL,
    modalidad VARCHAR(255) NOT NULL,
    id_tipologia INT NOT NULL,
    id_subtipologia INT,
    estado ENUM('Activo', 'Inactivo') NOT NULL DEFAULT 'Activo',
    eliminado BOOLEAN NOT NULL DEFAULT 0,
    fecha_creacion DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    fecha_actualizacion DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (id_tipologia) REFERENCES tipologias(id_tipologia) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (id_subtipologia) REFERENCES subtipologias(id_subtipologia) ON DELETE SET NULL ON UPDATE CASCADE
);

-- Tabla de ticket
CREATE TABLE ticket (
    id_ticket INT AUTO_INCREMENT PRIMARY KEY,
    id_usuario INT NOT NULL,
    numero_ticket VARCHAR(50) NOT NULL,
    descripcion TEXT NOT NULL,
    prioridad ENUM('Alta', 'Media', 'Baja') NOT NULL,
    estado ENUM('Abierto', 'Progreso', 'Pendiente', 'Resuelto', 'Cerrado') NOT NULL,
    id_rol INT,
    id_programa INT,
    id_tipologia INT,
    id_subtipologia INT,
    eliminado BOOLEAN NOT NULL DEFAULT 0,
    fecha_creacion DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    fecha_actualizacion DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (id_usuario) REFERENCES usuarios(id_usuario) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (id_rol) REFERENCES roles(id_rol) ON DELETE SET NULL ON UPDATE CASCADE,
    FOREIGN KEY (id_programa) REFERENCES programas(id_programa) ON DELETE SET NULL ON UPDATE CASCADE,
    FOREIGN KEY (id_tipologia) REFERENCES tipologias(id_tipologia) ON DELETE SET NULL ON UPDATE CASCADE,
    FOREIGN KEY (id_subtipologia) REFERENCES subtipologias(id_subtipologia) ON DELETE SET NULL ON UPDATE CASCADE
);

-- Historial de estados de ticket
CREATE TABLE ticket_estado_historial (
    id_historial INT AUTO_INCREMENT PRIMARY KEY,
    id_ticket INT NOT NULL,
    estado_anterior ENUM('Abierto', 'Progreso', 'Pendiente', 'Resuelto', 'Cerrado'),
    estado_nuevo ENUM('Abierto', 'Progreso', 'Pendiente', 'Resuelto', 'Cerrado'),
    fecha_cambio DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    id_usuario INT,
    eliminado BOOLEAN NOT NULL DEFAULT 0,
    FOREIGN KEY (id_ticket) REFERENCES ticket(id_ticket) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (id_usuario) REFERENCES usuarios(id_usuario) ON DELETE SET NULL ON UPDATE CASCADE
);

-- Tabla de comentario
CREATE TABLE comentario (
    id_comentario INT PRIMARY KEY AUTO_INCREMENT,
    id_ticket INT,
    id_usuario INT,
    comentario TEXT NOT NULL,
    prioridad ENUM('Alta', 'Media', 'Baja'),
    categoria VARCHAR(255),
    eliminado BOOLEAN NOT NULL DEFAULT 0,
    fecha_creacion DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    fecha_actualizacion DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX (id_ticket),
    INDEX (id_usuario),
    FOREIGN KEY (id_ticket) REFERENCES ticket(id_ticket) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (id_usuario) REFERENCES usuarios(id_usuario) ON DELETE SET NULL ON UPDATE CASCADE
);

-- Tabla de evento
CREATE TABLE evento (
    id_evento INT PRIMARY KEY AUTO_INCREMENT,
    id_ticket INT,
    accion VARCHAR(255) NOT NULL,
    id_usuario INT,
    categoria VARCHAR(255),
    eliminado BOOLEAN NOT NULL DEFAULT 0,
    fecha_evento DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    fecha_actualizacion DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX (id_ticket),
    INDEX (id_usuario),
    FOREIGN KEY (id_ticket) REFERENCES ticket(id_ticket) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (id_usuario) REFERENCES usuarios(id_usuario) ON DELETE SET NULL ON UPDATE CASCADE
);

-- Tabla de adjuntos
CREATE TABLE adjuntos (
    id_adjunto INT PRIMARY KEY AUTO_INCREMENT,
    id_ticket INT,
    id_comentario INT,
    nombre_archivo VARCHAR(255) NOT NULL,
    ruta_archivo VARCHAR(255) NOT NULL,
    tipo_archivo VARCHAR(50),
    eliminado BOOLEAN NOT NULL DEFAULT 0,
    fecha_subida DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (id_ticket) REFERENCES ticket(id_ticket) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (id_comentario) REFERENCES comentario(id_comentario) ON DELETE SET NULL ON UPDATE CASCADE
);

-- Tabla de notificaciones
CREATE TABLE notificaciones (
    id_notificacion INT PRIMARY KEY AUTO_INCREMENT,
    id_usuario INT NOT NULL,
    mensaje TEXT NOT NULL,
    leido BOOLEAN NOT NULL DEFAULT 0,
    eliminado BOOLEAN NOT NULL DEFAULT 0,
    fecha_creacion DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    fecha_actualizacion DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (id_usuario) REFERENCES usuarios(id_usuario) ON DELETE CASCADE ON UPDATE CASCADE
);

-- Tabla de auditoría
CREATE TABLE auditoria (
    id_auditoria INT PRIMARY KEY AUTO_INCREMENT,
    id_usuario INT,
    accion VARCHAR(255) NOT NULL,
    descripcion TEXT,
    eliminado BOOLEAN NOT NULL DEFAULT 0,
    fecha DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (id_usuario) REFERENCES usuarios(id_usuario) ON DELETE SET NULL ON UPDATE CASCADE
);

-- Tabla de restablecimiento de contraseña
CREATE TABLE password_reset (
    id_reset INT PRIMARY KEY AUTO_INCREMENT,
    id_usuario INT NOT NULL,
    token VARCHAR(255) NOT NULL,
    expiracion DATETIME NOT NULL,
    usado BOOLEAN NOT NULL DEFAULT 0,
    eliminado BOOLEAN NOT NULL DEFAULT 0,
    fecha_creacion DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (id_usuario) REFERENCES usuarios(id_usuario) ON DELETE CASCADE ON UPDATE CASCADE
);

-- Tabla de asignación de tickets a responsables
CREATE TABLE ticket_asignacion (
    id_asignacion INT PRIMARY KEY AUTO_INCREMENT,
    id_ticket INT NOT NULL,
    id_usuario INT NOT NULL,
    fecha_asignacion DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    eliminado BOOLEAN NOT NULL DEFAULT 0,
    FOREIGN KEY (id_ticket) REFERENCES ticket(id_ticket) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (id_usuario) REFERENCES usuarios(id_usuario) ON DELETE CASCADE ON UPDATE CASCADE
);

-- Tabla de logs de acceso
CREATE TABLE acceso_log (
    id_log INT PRIMARY KEY AUTO_INCREMENT,
    id_usuario INT NOT NULL,
    tipo VARCHAR(20) NOT NULL,
    fecha DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    ip VARCHAR(45),
    eliminado BOOLEAN NOT NULL DEFAULT 0,
    FOREIGN KEY (id_usuario) REFERENCES usuarios(id_usuario) ON DELETE CASCADE ON UPDATE CASCADE
);

-- Volcado de datos para la tabla roles
INSERT INTO roles (nombre, descripcion, estado, fecha_creacion) VALUES
('Administrador', 'Acceso completo al sistema.', 'Activo', '2023-10-01 10:00:00'),
('Soporte', 'Resuelve tickets y asistencia técnica.', 'Activo', '2023-10-01 10:00:00'),
('Usuario', 'Crea tickets y realiza solicitudes.', 'Activo', '2023-10-01 10:00:00');

-- Volcado de datos para la tabla permisos
INSERT INTO permisos (nombre, descripcion, fecha_creacion) VALUES
('Crear', 'Permiso para crear usuarios tipolgias programas tickets y comentarios en el sistema.', '2023-10-01 10:00:00'),
('Ver', 'Permiso para visualizar usuarios tipolgias programas tickets y comentarios', '2023-10-01 10:00:00'),
('Editar', 'Permiso para editar los detalles de un usuario tipolgia programa ticket y comentario', '2023-10-01 10:00:00'),
('Eliminar', 'Permiso para eliminar una tipolgia programa ticket y comentario.', '2023-10-01 10:00:00'),
('Activar', 'Permiso para activar un usuario tipolgia o programa.', '2023-10-01 10:00:00'),
('Desactivar', 'Permiso para desactivar un usuario tipolgia o programa.', '2023-10-01 10:00:00');

-- Asignación de permisos a los roles en la tabla intermedia rolpermisos
INSERT INTO rolpermisos (id_rol, id_permiso, fecha_asignacion) VALUES
(1, 1, '2023-10-01 10:00:00'), -- Administrador: Crear
(1, 2, '2023-10-01 10:00:00'), -- Administrador: Ver
(1, 3, '2023-10-01 10:00:00'), -- Administrador: Editar
(1, 4, '2023-10-01 10:00:00'), -- Administrador: Eliminar
(1, 5, '2023-10-01 10:00:00'), -- Administrador: Activar
(1, 6, '2023-10-01 10:00:00'), -- Administrador: Desactivar
(2, 2, '2023-10-01 10:00:00'), -- Soporte: Ver
(2, 3, '2023-10-01 10:00:00'), -- Soporte: Editar
(3, 1, '2023-10-01 10:00:00'), -- Usuario: Crear
(3, 2, '2023-10-01 10:00:00'); -- Usuario: Ver

-- Volcado de datos para la tabla usuarios
INSERT INTO usuarios (
    tipo_documento, documento, nombre, apellido, email, telefono, departamento, municipio, foto, password, id_rol, estado, email_verificado, eliminado
) VALUES
('CC', '1053810807', 'Jonathan', 'Aristizabal', 'martinrobinsofficial@gmail.com', '3187542709', 'Caldas', 'Manizales', 'assets/images/perfiles/default.png', '$2y$10$JA/SnuV36zc/jbkkH4Wwje7F1HGm5Le7ZQd0AMzrTGk3lBPaUIzLi', 1, 'Activo', 1, 0),
('CC', '1000000002', 'Jaime', 'Rodriguez', 'jaime@email.com', '3100000002', 'Caldas', 'Manizales', 'assets/images/perfiles/default.png', '$2y$10$JA/SnuV36zc/jbkkH4Wwje7F1HGm5Le7ZQd0AMzrTGk3lBPaUIzLi', 2, 'Activo', 1, 0),
('CC', '1000000003', 'Gloria', 'Corrales', 'gloria@email.com', '3100000003', 'Caldas', 'Manizales', 'assets/images/perfiles/default.png', '$2y$10$JA/SnuV36zc/jbkkH4Wwje7F1HGm5Le7ZQd0AMzrTGk3lBPaUIzLi', 2, 'Activo', 1, 0),
('CC', '1000000004', 'Sofía', 'Ramírez', 'sofia@email.com', '3100000004', 'Caldas', 'Manizales', 'assets/images/perfiles/default.png', '$2y$10$JA/SnuV36zc/jbkkH4Wwje7F1HGm5Le7ZQd0AMzrTGk3lBPaUIzLi', 3, 'Activo', 1, 0),
('CC', '1000000005', 'Carlos', 'López', 'carlos@email.com', '3100000005', 'Caldas', 'Manizales', 'assets/images/perfiles/default.png', '$2y$10$JA/SnuV36zc/jbkkH4Wwje7F1HGm5Le7ZQd0AMzrTGk3lBPaUIzLi', 3, 'Activo', 1, 0),
('CC', '1000000006', 'María', 'Torres', 'maria@email.com', '3100000006', 'Caldas', 'Manizales', 'assets/images/perfiles/default.png', '$2y$10$JA/SnuV36zc/jbkkH4Wwje7F1HGm5Le7ZQd0AMzrTGk3lBPaUIzLi', 3, 'Activo', 1, 0),
('CC', '1000000007', 'Pedro', 'García', 'pedro@email.com', '3100000007', 'Caldas', 'Manizales', 'assets/images/perfiles/default.png', '$2y$10$JA/SnuV36zc/jbkkH4Wwje7F1HGm5Le7ZQd0AMzrTGk3lBPaUIzLi', 3, 'Activo', 1, 0),
('CC', '1000000008', 'Laura', 'Jiménez', 'laura@email.com', '3100000008', 'Caldas', 'Manizales', 'assets/images/perfiles/default.png', '$2y$10$JA/SnuV36zc/jbkkH4Wwje7F1HGm5Le7ZQd0AMzrTGk3lBPaUIzLi', 3, 'Activo', 1, 0),
('CC', '1000000009', 'Diego', 'Castro', 'diego@email.com', '3100000009', 'Caldas', 'Manizales', 'assets/images/perfiles/default.png', '$2y$10$JA/SnuV36zc/jbkkH4Wwje7F1HGm5Le7ZQd0AMzrTGk3lBPaUIzLi', 3, 'Activo', 1, 0),
('CC', '1000000010', 'Valentina', 'Mendoza', 'valentina@email.com', '3100000010', 'Caldas', 'Manizales', 'assets/images/perfiles/default.png', '$2y$10$JA/SnuV36zc/jbkkH4Wwje7F1HGm5Le7ZQd0AMzrTGk3lBPaUIzLi', 3, 'Activo', 1, 0),
('CC', '1000000011', 'Miguel', 'Suárez', 'miguel@email.com', '3100000011', 'Caldas', 'Manizales', 'assets/images/perfiles/default.png', '$2y$10$JA/SnuV36zc/jbkkH4Wwje7F1HGm5Le7ZQd0AMzrTGk3lBPaUIzLi', 3, 'Activo', 1, 0),
('CC', '1000000012', 'Camila', 'Moreno', 'camila@email.com', '3100000012', 'Caldas', 'Manizales', 'assets/images/perfiles/default.png', '$2y$10$JA/SnuV36zc/jbkkH4Wwje7F1HGm5Le7ZQd0AMzrTGk3lBPaUIzLi', 3, 'Activo', 1, 0),
('CC', '1000000013', 'Andrés', 'Ríos', 'andres@email.com', '3100000013', 'Caldas', 'Manizales', 'assets/images/perfiles/default.png', '$2y$10$JA/SnuV36zc/jbkkH4Wwje7F1HGm5Le7ZQd0AMzrTGk3lBPaUIzLi', 3, 'Activo', 1, 0),
('CC', '1000000014', 'Paula', 'Vargas', 'paula@email.com', '3100000014', 'Caldas', 'Manizales', 'assets/images/perfiles/default.png', '$2y$10$JA/SnuV36zc/jbkkH4Wwje7F1HGm5Le7ZQd0AMzrTGk3lBPaUIzLi', 3, 'Activo', 1, 0),
('CC', '1000000015', 'Jorge', 'Castaño', 'jorge@email.com', '3100000015', 'Caldas', 'Manizales', 'assets/images/perfiles/default.png', '$2y$10$JA/SnuV36zc/jbkkH4Wwje7F1HGm5Le7ZQd0AMzrTGk3lBPaUIzLi', 3, 'Activo', 1, 0),
('CC', '1000000016', 'Sara', 'Ortiz', 'sara@email.com', '3100000016', 'Caldas', 'Manizales', 'assets/images/perfiles/default.png', '$2y$10$JA/SnuV36zc/jbkkH4Wwje7F1HGm5Le7ZQd0AMzrTGk3lBPaUIzLi', 3, 'Activo', 1, 0),
('CC', '1000000017', 'Felipe', 'Navarro', 'felipe@email.com', '3100000017', 'Caldas', 'Manizales', 'assets/images/perfiles/default.png', '$2y$10$JA/SnuV36zc/jbkkH4Wwje7F1HGm5Le7ZQd0AMzrTGk3lBPaUIzLi', 3, 'Activo', 1, 0),
('CC', '1000000018', 'Isabella', 'Cruz', 'isabella@email.com', '3100000018', 'Caldas', 'Manizales', 'assets/images/perfiles/default.png', '$2y$10$JA/SnuV36zc/jbkkH4Wwje7F1HGm5Le7ZQd0AMzrTGk3lBPaUIzLi', 3, 'Activo', 1, 0),
('CC', '1000000019', 'David', 'Santos', 'david@email.com', '3100000019', 'Caldas', 'Manizales', 'assets/images/perfiles/default.png', '$2y$10$JA/SnuV36zc/jbkkH4Wwje7F1HGm5Le7ZQd0AMzrTGk3lBPaUIzLi', 3, 'Activo', 1, 0),
('CC', '1000000020', 'Lucía', 'Mejía', 'lucia@email.com', '3100000020', 'Caldas', 'Manizales', 'assets/images/perfiles/default.png', '$2y$10$JA/SnuV36zc/jbkkH4Wwje7F1HGm5Le7ZQd0AMzrTGk3lBPaUIzLi', 3, 'Activo', 1, 0);

-- Volcado de datos para la tabla tipologias (ajustada: campo 'nombre')
INSERT INTO tipologias (nombre, descripcion, id_rol, estado_tipologia, fecha_creacion) VALUES
('Formacion', 'Procesos de formación y capacitación.', 1, 'Activo', '2023-10-01 10:00:00'),
('Consultas', 'Consultas generales y solicitudes de información.', 1, 'Activo', '2023-10-01 10:00:00'),
('Certificacion', 'Procesos de certificación y validación de competencias.', 1, 'Activo', '2023-10-01 10:00:00'),
('PQRSF', 'Peticiones, quejas, reclamos, sugerencias y felicitaciones.', 1, 'Activo', '2023-10-01 10:00:00'),
('Otro', 'Otras tipologías no clasificadas.', 1, 'Activo', '2023-10-01 10:00:00');

-- Volcado de datos para la tabla subtipologias
INSERT INTO subtipologias (nombre, descripcion, id_tipologia, estado, fecha_creacion) VALUES
('Solicitud de cupos', 'Solicitudes de cupos para formación.', 1, 'Activo', '2023-10-01 10:00:00'),
('Apertura de programa', 'Consultas sobre apertura de programas.', 2, 'Activo', '2023-10-01 10:00:00'),
('Competencias laborales', 'Certificación de competencias laborales.', 3, 'Activo', '2023-10-01 10:00:00'),
('Peticiones', 'Peticiones en PQRSF.', 4, 'Activo', '2023-10-01 10:00:00'),
('Quejas', 'Quejas en PQRSF.', 4, 'Activo', '2023-10-01 10:00:00'),
('Reclamos', 'Reclamos en PQRSF.', 4, 'Activo', '2023-10-01 10:00:00'),
('Sugerencias', 'Sugerencias en PQRSF.', 4, 'Activo', '2023-10-01 10:00:00'),
('Felicitaciones', 'Felicitaciones en PQRSF.', 4, 'Activo', '2023-10-01 10:00:00'),
('Otras solicitudes', 'Otras solicitudes.', 5, 'Activo', '2023-10-01 10:00:00');

-- Volcado de datos para la tabla programas
INSERT INTO programas (codigo, version, nombre, descripcion, duracion, linea_tecnologica, red_tecnologica, red_de_conocimiento, modalidad, id_tipologia, id_subtipologia, estado, fecha_creacion) VALUES
('22620442', '3', 'BASICO OPERATIVO TRABAJO SEGURO EN ALTURAS', 'Capacitación para trabajos en altura.', 48, 'MATERIALES HERRAMIENTAS', 'MATERIALES PARA LA CONSTRUCCIÓN', 'Construcción', 'Presencial', 1, 1, 'Activo', NOW()),
('22620443', '2', 'ADMINISTRATIVO PARA JEFES DE AREA TRABAJO SEGURO EN ALTURAS', 'Capacitación para trabajos en altura.', 10, 'MATERIALES HERRAMIENTAS', 'MATERIALES PARA LA CONSTRUCCIÓN', 'Construcción', 'Presencial', 1, 1, 'Activo', NOW()),
('22620444', '1', 'GESTION DEL RIESGO EN ALTURAS', 'Capacitación en gestión del riesgo.', 6, 'MATERIALES HERRAMIENTAS', 'MATERIALES PARA LA CONSTRUCCIÓN', 'Construcción', 'Presencial', 1, 1, 'Activo', NOW());