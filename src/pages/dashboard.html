<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - TicketPro+</title>
    <!-- Enlace a los estilos CSS -->
    <link rel="stylesheet" href="/tk/src/assets/css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Enlace a Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <!-- Fuentes de Google -->
    <link
        href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <script src="/tk/src/assets/js/jquery/jquery.min.js"></script>
</head>

<body class="flex flex-col min-h-screen font-poppins bg-color1">
    <!-- Encabezado -->
    <header class="flex items-center p-4 bg-color5 h-20 shadow-lg relative">
        <!-- Botón para mostrar/ocultar el sidebar -->
        <button id="sidebar-toggle"
            class="lg:hidden p-3 bg-transparent border border-color5 rounded-lg text-color1 focus:outline-none z-50 absolute left-4 top-1/2 -translate-y-1/2">
            <i class="fas fa-bars"></i>
            <span class="sr-only">Panel</span>
        </button>
        <!-- Logo centrado -->
        <div class="flex-1 flex justify-center items-center">
            <img src="/tk/src/assets/images/logoH.png" alt="Logo TicketPro+" class="p-2 w-28">
        </div>
        <!-- Saludo, foto y menú (web) -->
        <div class="hidden md:flex items-center space-x-4 absolute right-4 top-1/2 -translate-y-1/2 z-50">
            <span class="text-white font-base text-base">Hola, <span id="username">Usuario</span></span>
            <div
                class="w-10 h-10 rounded-full overflow-hidden border-2 border-white flex items-center justify-center bg-gray-200">
                <img src="/tk/src/assets/images/perfiles/default.png" alt="Foto de perfil" id="profile-img-web"
                    class="object-cover w-full h-full">
            </div>
            <div class="flex items-center cursor-pointer p-2" id="header-menu-button">
                <div class="flex justify-center items-center w-8 h-6">
                    <i id="header-dashboard-icon" class="fas fa-chevron-down text-white"></i>
                </div>
            </div>
        </div>
        <!-- Menú móvil: saludo y foto dentro del menú -->
        <nav id="header-menu-nav"
            class="hidden flex-col items-center bg-white absolute top-16 right-4 p-4 rounded shadow-lg z-50 w-56">
            <div class="flex flex-col items-center w-full mb-2 md:hidden">
                <span class="text-gray-700 font-semibold text-base mb-2">Hola, <span
                        id="username-mobile">Usuario</span></span>
                <div
                    class="w-12 h-12 rounded-full overflow-hidden border-2 border-gray-300 flex items-center justify-center bg-gray-200 mb-2">
                    <img src="/tk/src/assets/images/perfiles/default.png" alt="Foto de perfil" id="profile-img-mobile"
                        class="object-cover w-full h-full">
                </div>
            </div>
            <a href="#" id="btnMiPerfil"
                class="block px-4 py-1 text-gray-700 hover:text-color6 font-semibold text-sm w-full text-left">
                <i class="fas fa-user mr-2"></i> Mi Perfil
            </a>
            <a href="/tk/src/pages/config.html"
                class="block px-4 py-1 text-gray-700 hover:text-color6 font-semibold text-sm w-full text-left">
                <i class="fas fa-cog mr-2"></i> Configuraciones
            </a>
            <form id="logoutForm" action="/tk/server/controller/LogoutController.php" method="post" class="w-full">
                <button type="submit" name="logout"
                    class="block px-4 py-1 text-gray-700 hover:text-color6 font-semibold text-sm w-full text-left">
                    <i class="fas fa-sign-out-alt mr-2"></i> Logout
                </button>
            </form>
        </nav>
        <!-- Menú y saludo en móvil -->
        <div class="flex md:hidden items-center cursor-pointer p-2 z-50 absolute right-4 top-1/2 -translate-y-1/2"
            id="header-menu-button-mobile">
            <div class="flex justify-center items-center w-8 h-6">
                <i id="header-dashboard-icon-mobile" class="fas fa-chevron-down text-white"></i>
            </div>
        </div>
    </header>

    <!-- Contenedor principal con flex para sidebar y contenido -->
    <div class="flex flex-1 min-h-0 h-[calc(100vh-5rem)] relative">
        <!-- Sidebar y overlay -->
        <aside id="sidebar"
            class="sidebar bg-color4 p-4 w-48 fixed top-20 left-0 bottom-0 h-auto min-h-0 max-h-none shadow-lg transition-all duration-300 flex-shrink-0 flex flex-col z-50 hidden overflow-y-auto">
            <ul class="space-y-4 flex-1">
                <div class="flex items-center justify-center space-x-2 p-2 rounded mt-2">
                    <h2 class="text-lg md:text-base font-normal text-color1 flex items-center text-base sm:text-base">
                        <i class="fa-solid fa-shekel-sign text-color5 mr-2"></i>TICKET PRO
                    </h2>
                </div>
                <!-- Menú desplegable -->
                <li class="relative group">
                    <span class="block w-full h-px bg-gray-300 my-2"></span>
                    <button id="sidebar-menu-button"
                        class="block p-2 text-color1 w-full text-center rounded-lg flex items-center justify-center space-x-2 transition duration-300">
                        <div class="flex items-center justify-center w-full">
                            <span class="text-color6 text-base md:text-base font-light">Dashboard</span>
                            <i id="sidebar-dashboard-icon"
                                class="fas fa-chevron-down text-color1 hover:text-color6 mx-1 text-base md:text-base"></i>
                        </div>
                    </button>
                    <span class="block w-full h-px bg-gray-300 my-2"></span>
                    <ul id="sidebar-submenu" class="hidden bg-color4 p-2 w-full mt-2 rounded-lg">
                        <li>
                            <a href="#" id="sidebar-usuarios-btn"
                                class="sidebar-link block p-2 text-color1 hover:text-color6 rounded-lg flex items-center text-base md:text-sm">
                                <i class="fas fa-user mr-2 text-base md:text-sm"></i>
                                <span class="text-base md:text-sm">Usuarios</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" id="sidebar-roles-btn"
                                class="sidebar-link block p-2 text-color1 hover:text-color6 rounded-lg flex items-center text-base md:text-sm">
                                <i class="fas fa-user-shield mr-2 text-base md:text-sm"></i>
                                <span class="text-base md:text-sm">Roles</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" id="sidebar-permisos-btn"
                                class="sidebar-link block p-2 text-color1 hover:text-color6 rounded-lg flex items-center text-base md:text-sm">
                                <i class="fas fa-key mr-2 text-base md:text-sm"></i>
                                <span class="text-base md:text-sm">Permisos</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" id="sidebar-tipologias-btn"
                                class="sidebar-link block p-2 text-color1 hover:text-color6 rounded-lg flex items-center text-base md:text-sm">
                                <i class="fas fa-layer-group mr-2 text-base md:text-sm"></i>
                                <span class="text-base md:text-sm">Tipologías</span>
                            </a>
                        </li>
                        <li>
                            <a href="../pages/programas.html" id="sidebar-programas-btn"
                                class="sidebar-link block p-2 text-color1 hover:text-color6 rounded-lg flex items-center text-base md:text-sm">
                                <i class="fas fa-laptop mr-2 text-base md:text-sm"></i>
                                <span class="text-base md:text-sm">Programas</span>
                            </a>
                        </li>
                        <li>
                            <a href="../pages/tickets.html" id="sidebar-tickets-btn"
                                class="sidebar-link block p-2 text-color1 hover:text-color6 rounded-lg flex items-center text-base md:text-sm">
                                <i class="fas fa-ticket-alt mr-2 text-base md:text-sm"></i>
                                <span class="text-base md:text-sm">Tickets</span>
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
        </aside>
        <div id="sidebar-overlay" class="fixed inset-0 bg-black bg-opacity-40 z-40 hidden"></div>

        <!-- Contenido Principal -->
        <main class="flex-1 relative bg-gray-100 p-6 overflow-y-auto">
            <div class="flex-1 mx-6" id="main-content"></div>
        </main>
    </div>

    <!-- Modal Mi Perfil Usuario editable -->
    <div id="modalPerfil" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white p-2 sm:p-4 rounded-lg shadow-lg w-full h-full max-w-full sm:max-w-lg border-2 border-color5 relative
        flex flex-col justify-center
        max-h-screen
        sm:h-auto sm:max-h-none
        overflow-y-auto
        mx-0 sm:mx-auto
        my-4 sm:my-0
        p-10 ">
            <button type="button" id="closeModalPerfil"
                class="absolute top-2 right-2 text-color7 text-lg sm:text-2xl font-bold hover:text-red-700">&times;
            </button>

            <!-- Título y descripción para edición de perfil -->
            <h2 id="tituloEditarPerfil" class="hidden font-bold text-color5 mb-1 mt-8
                text-base sm:text-lg flex items-center justify-center text-center w-full">
                <i class="fas fa-user-edit mr-2"></i> Editar Perfil
            </h2>
            <p id="descripcionEditarPerfil" class="hidden text-color6 mb-2 text-xs sm:text-base w-full text-center">
                Modifica tus datos personales
            </p>

            <form id="formPerfilUsuario" enctype="multipart/form-data" autocomplete="off">
                <div class="flex flex-col items-center mb-2">
                    <!-- Imagen de perfil -->
                    <img id="perfilFoto" src="/tk/src/assets/images/perfiles/default.png" alt="Foto de perfil"
                        class="w-20 h-20 sm:w-24 sm:h-24 rounded-full object-cover border-4 border-color5 mb-2" />
                    <input type="file" id="inputPerfilFoto" name="foto" accept="image/*"
                        class="hidden mb-2 w-full text-xs text-gray-500 border rounded bg-gray-100 p-2 text-center" />

                    <!-- Nombre completo -->
                    <h2 class="font-bold text-color4 text-center mb-1 text-xs sm:text-base" id="perfilNombreCompleto">
                    </h2>
                    <input type="text" id="inputPerfilNombreCompleto"
                        class="hidden mb-2 w-full rounded bg-gray-100 p-2 text-color4 font-medium text-center text-xs sm:text-base"
                        autocomplete="off" />

                    <!-- Email -->
                    <div class="text-gray-600 text-center mb-1 text-xs sm:text-base" id="perfilEmail"></div>
                    <input type="email" id="inputPerfilEmail"
                        class="hidden mb-2 w-full rounded bg-gray-100 p-2 text-color4 font-medium text-center text-xs sm:text-base"
                        autocomplete="off" />

                    <!-- Rol (solo visualización) -->
                    <span class="inline-block bg-color6 text-white px-3 py-1 rounded mb-2 text-xs sm:text-sm"
                        id="perfilRol"></span>
                </div>

                <div class="grid grid-cols-1 gap-2 mb-2 sm:grid-cols-2 sm:gap-2 sm:mb-4">
                    <!-- Documento (solo visualización) -->
                    <div class="bg-gray-100 rounded p-2 border border-gray-200 text-center">
                        <span class="font-semibold text-color5 text-xs sm:text-sm">Documento:</span>
                        <div class="text-gray-700 text-center text-xs sm:text-sm" id="perfilDocumento"></div>
                        <input type="text" id="inputPerfilDocumento"
                            class="hidden mt-2 w-full rounded bg-color1 p-2 text-center text-xs sm:text-sm"
                            autocomplete="off" disabled />
                    </div>
                    <!-- Teléfono -->
                    <div class="bg-gray-100 rounded p-2 border border-gray-200 text-center">
                        <span class="font-semibold text-color5 text-xs sm:text-sm">Teléfono:</span>
                        <div class="text-gray-700 text-center text-xs sm:text-sm" id="perfilTelefono"></div>
                        <input type="text" id="inputPerfilTelefono"
                            class="hidden mt-2 w-full rounded bg-color1 p-2 text-center text-xs sm:text-sm"
                            autocomplete="off" />
                    </div>
                    <!-- Departamento -->
                    <div class="bg-gray-100 rounded p-2 border border-gray-200 text-center">
                        <span class="font-semibold text-color5 text-xs sm:text-sm">Departamento:</span>
                        <div class="text-gray-700 text-center text-xs sm:text-sm" id="perfilDepartamento"></div>
                        <select id="inputPerfilDepartamento"
                            class="hidden mt-2 w-full rounded bg-color1 p-2 text-center text-xs sm:text-sm"></select>
                    </div>
                    <!-- Municipio -->
                    <div class="bg-gray-100 rounded p-2 border border-gray-200 text-center">
                        <span class="font-semibold text-color5 text-xs sm:text-sm">Municipio:</span>
                        <div class="text-gray-700 text-center text-xs sm:text-sm" id="perfilMunicipio"></div>
                        <select id="inputPerfilMunicipio"
                            class="hidden mt-2 w-full rounded bg-color1 p-2 text-center text-xs sm:text-sm"></select>
                    </div>
                </div>

                <div class="text-center mt-2 flex flex-col sm:flex-row gap-2 justify-center items-center">
                    <button type="button" id="btnEditarPerfil"
                        class="bg-color5 text-white p-2 rounded w-full sm:w-40 font-semibold hover:bg-color6 transition text-xs sm:text-base">Editar</button>
                    <button type="submit" id="btnGuardarPerfil"
                        class="hidden bg-green-600 text-white p-2 rounded w-full sm:w-40 font-semibold hover:bg-green-700 transition text-xs sm:text-base">Guardar</button>
                    <button type="button" id="btnCancelarEdicionPerfil"
                        class="hidden bg-gray-300 p-2 rounded w-full sm:w-40 font-semibold text-color4 hover:bg-gray-400 transition text-xs sm:text-base">Cancelar</button>
                    <button type="button" id="closeModalPerfilBtn"
                        class="bg-gray-300 p-2 rounded w-full sm:w-40 font-semibold text-color4 hover:bg-gray-400 transition text-xs sm:text-base">Cerrar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ----------------------------->
    <!-- Modales para CRUD de usuarios -->
    <!-- ----------------------------->

    <!-- Modal Editar Usuario -->
    <div id="modalEditar" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <form id="dataFormEditar" class="bg-white p-4 sm:p-8 rounded-lg shadow-lg w-full max-w-xl border-2 border-color5
        flex flex-col
        items-center
        overflow-y-auto
        h-full max-h-screen
        md:h-auto md:max-h-[93vh]">
            <h2
                class="text-lg sm:text-xl font-bold text-color4 mt-4 flex items-center justify-center text-center w-full">
                <i class="fas fa-user-edit mr-2"></i> Editar Usuario
            </h2>
            <p class="text-center text-color6 mb-4 text-sm sm:text-base w-full">Modifica los datos del usuario en
                TicketPro+</p>
            <div class="mb-4 flex flex-col items-center w-full">
                <label for="fotoEditar"
                    class="font-semibold text-color5 mb-2 flex items-center text-sm sm:text-sm justify-center w-full">
                    <i class="fas fa-camera mr-2"></i> Cambiar Foto de Perfil
                </label>
                <input type="file" id="fotoEditar" name="fotoEditar" accept="image/*"
                    class="block w-full text-xs sm:text-sm text-gray-500 mb-2 border rounded bg-gray-100 p-2 text-center" />
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-2 mb-4 w-full">
                <!-- Campos editables -->
                <div class="flex flex-col items-center w-full">
                    <label for="nombreEditar"
                        class="font-bold text-color4 mb-1 block text-sm sm:text-sm text-center w-full">Nombre</label>
                    <input type="text" id="nombreEditar" name="nombreEditar" placeholder="Nombre" required
                        class="mb-2 w-full rounded bg-gray-100 p-2 text-color4 font-medium text-sm sm:text-sm text-center">
                </div>
                <div class="flex flex-col items-center w-full">
                    <label for="apellidoEditar"
                        class="font-bold text-color4 mb-1 block text-sm sm:text-sm text-center w-full">Apellido</label>
                    <input type="text" id="apellidoEditar" name="apellidoEditar" placeholder="Apellido" required
                        class="mb-2 w-full rounded bg-gray-100 p-2 text-color4 font-medium text-sm sm:text-sm text-center">
                </div>
                <div class="md:col-span-2 w-full">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 w-full">
                        <div class="flex flex-col items-center w-full">
                            <label for="departamentoEditar"
                                class="font-bold text-color4 mb-1 block text-sm sm:text-sm text-center w-full">Departamento</label>
                            <select id="departamentoEditar" name="departamentoEditar"
                                class="text-color4 w-full text-sm sm:text-sm text-center"></select>
                        </div>
                        <div class="flex flex-col items-center w-full">
                            <label for="municipioEditar"
                                class="font-bold text-color4 mb-1 block text-sm sm:text-sm text-center w-full">Municipio</label>
                            <select id="municipioEditar" name="municipioEditar"
                                class=" text-color4 w-full text-sm sm:text-sm max-h-60 overflow-y-auto text-center"></select>
                        </div>
                    </div>
                </div>
                <div class="flex flex-col items-center w-full">
                    <label for="emailEditar"
                        class="font-bold text-color4 mb-1 block text-sm sm:text-sm text-center w-full">Correo
                        electrónico</label>
                    <input type="email" id="emailEditar" name="emailEditar" placeholder="Correo electrónico" required
                        class="mb-2 w-full rounded bg-gray-100 p-2 text-color4 font-medium text-sm sm:text-sm text-center">
                </div>
                <div class="flex flex-col items-center w-full">
                    <label for="telefonoEditar"
                        class="font-bold text-color4 mb-1 block text-sm sm:text-sm text-center w-full">Teléfono</label>
                    <input type="text" id="telefonoEditar" name="telefonoEditar" placeholder="Teléfono" required
                        class="mb-2 w-full rounded bg-gray-100 p-2 text-color4 font-medium text-sm sm:text-sm text-center">
                </div>
                <div class="flex flex-col items-center w-full">
                    <label for="rolEditar"
                        class="font-bold text-color4 mb-1 block text-sm sm:text-sm text-center w-full">Rol</label>
                    <select id="rolEditar" name="rolEditar"
                        class="mb-2 w-full rounded bg-gray-100 p-2 text-color4 font-medium text-sm sm:text-sm text-center">
                    </select>
                </div>
            </div>
            <input type="hidden" id="id_usuarioEditar" name="id_usuarioEditar">
            <div class="flex flex-col md:flex-row gap-2 mt-2 mb-2 w-full items-center justify-center ">
                <button type="submit"
                    class="bg-color5 text-white p-2 rounded w-full font-bold hover:bg-color6 transition text-sm sm:text-sm text-center">Guardar</button>
                <button type="button" id="closeModalEditar"
                    class="bg-gray-300 p-2 rounded w-full font-bold text-color4 hover:bg-gray-400 transition text-sm sm:text-sm text-center">Cancelar</button>
            </div>
        </form>
    </div>
    <!-- Modal Crear Usuario -->
    <div id="modalCrear" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <form id="dataFormCrear" class="bg-white p-4 sm:p-8 rounded-lg shadow-lg w-full max-w-xl border-2 border-color5
        flex flex-col
        items-center
        overflow-y-auto
        h-full max-h-screen
        md:h-auto md:max-h-[93vh]">
            <h2
                class="text-lg sm:text-xl font-bold text-color4 mt-2 flex items-center justify-center text-center w-full">
                <i class="fas fa-user-plus mr-2"></i> Crear Usuario
            </h2>
            <p class="text-center text-color6 mb-6 text-sm sm:text-sm w-full">Registra un nuevo usuario en TicketPro+
            </p>
            <div class="mb-4 flex flex-col items-center w-full">
                <label for="fotoCrear"
                    class="font-semibold text-color5 mb-2 flex items-center text-sm sm:text-sm justify-center w-full">
                    <i class="fas fa-camera mr-2"></i> Foto de Perfil
                </label>
                <input type="file" id="fotoCrear" name="fotoCrear" accept="image/*"
                    class="block w-full text-xs sm:text-sm text-gray-500 mb-2 border rounded bg-gray-100 p-2 text-center" />
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-2 mb-2 w-full">
                <div class="flex flex-col items-center w-full">
                    <label for="tipo_documentoCrear"
                        class="font-bold text-color4 mb-1 block text-sm sm:text-sm text-center w-full">Tipo de
                        documento</label>
                    <select id="tipo_documentoCrear" name="tipo_documentoCrear"
                        class="mb-2 w-full rounded bg-gray-100 p-2 text-color4 font-medium text-sm sm:text-sm text-center">
                        <!-- Opciones se llenan dinámicamente -->
                    </select>
                </div>
                <div class="flex flex-col items-center w-full">
                    <label for="documentoCrear"
                        class="font-bold text-color4 mb-1 block text-sm sm:text-sm text-center w-full">Documento</label>
                    <input type="text" id="documentoCrear" name="documentoCrear" placeholder="Documento"
                        class="mb-2 w-full rounded bg-gray-100 p-2 text-color4 font-medium text-sm sm:text-sm text-center">
                </div>
                <div class="flex flex-col items-center w-full">
                    <label for="nombreCrear"
                        class="font-bold text-color4 mb-1 block text-sm sm:text-sm text-center w-full">Nombre</label>
                    <input type="text" id="nombreCrear" name="nombreCrear" placeholder="Nombre" required
                        class="mb-2 w-full rounded bg-gray-100 p-2 text-color4 font-medium text-sm sm:text-sm text-center">
                </div>
                <div class="flex flex-col items-center w-full">
                    <label for="apellidoCrear"
                        class="font-bold text-color4 mb-1 block text-sm sm:text-sm text-center w-full">Apellido</label>
                    <input type="text" id="apellidoCrear" name="apellidoCrear" placeholder="Apellido" required
                        class="mb-2 w-full rounded bg-gray-100 p-2 text-color4 font-medium text-sm sm:text-sm text-center">
                </div>
                <div class="flex flex-col items-center w-full">
                    <label for="emailCrear"
                        class="font-bold text-color4 mb-1 block text-sm sm:text-sm text-center w-full">Correo
                        electrónico</label>
                    <input type="email" id="emailCrear" name="emailCrear" placeholder="Correo electrónico" required
                        class="mb-2 w-full rounded bg-gray-100 p-2 text-color4 font-medium text-sm sm:text-sm text-center">
                </div>
                <div class="flex flex-col items-center w-full">
                    <label for="telefonoCrear"
                        class="font-bold text-color4 mb-1 block text-sm sm:text-sm text-center w-full">Teléfono</label>
                    <input type="text" id="telefonoCrear" name="telefonoCrear" placeholder="Teléfono" required
                        class="mb-2 w-full rounded bg-gray-100 p-2 text-color4 font-medium text-sm sm:text-sm text-center">
                </div>
                <div class="flex flex-col items-center w-full">
                    <label for="passwordCrear"
                        class="font-bold text-color4 mb-1 block text-sm sm:text-sm text-center w-full">Contraseña</label>
                    <input type="password" id="passwordCrear" name="passwordCrear" placeholder="Contraseña" required
                        class="mb-2 w-full rounded bg-gray-100 p-2 text-color4 font-medium text-sm sm:text-sm text-center">
                </div>
                <div class="flex flex-col items-center w-full">
                    <label for="confirmarPasswordCrear"
                        class="font-bold text-color4 mb-1 block text-sm sm:text-sm text-center w-full">Confirmar
                        Contraseña</label>
                    <input type="password" id="confirmarPasswordCrear" name="confirmarPasswordCrear"
                        placeholder="Confirmar contraseña" required
                        class="mb-2 w-full rounded bg-gray-100 p-2 text-color4 font-medium text-sm sm:text-sm text-center">
                </div>
                <div class="md:col-span-2 w-full">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 w-full">
                        <div class="flex flex-col items-center w-full">
                            <label for="departamentoCrear"
                                class="font-bold text-color4 mb-1 block text-sm sm:text-sm text-center w-full">Departamento</label>
                            <select id="departamentoCrear" name="departamentoCrear"
                                class="text-color4 w-full text-sm sm:text-sm text-center"></select>
                        </div>
                        <div class="flex flex-col items-center w-full">
                            <label for="municipioCrear"
                                class="font-bold text-color4 mb-1 block text-sm sm:text-sm text-center w-full">Municipio</label>
                            <select id="municipioCrear" name="municipioCrear"
                                class="text-center text-color4 w-full max-h-60 overflow-y-auto text-sm sm:text-sm"></select>
                        </div>
                    </div>
                </div>
                <div class="flex flex-col items-center w-full">
                    <label for="rolCrear"
                        class="font-bold text-color4 mb-1 block text-sm sm:text-sm text-center w-full">Rol</label>
                    <select id="rolCrear" name="rolCrear"
                        class="mb-2 w-full rounded bg-gray-100 p-2 text-color4 font-medium text-sm sm:text-sm text-center">
                        <!-- Opciones se llenan dinámicamente -->
                    </select>
                </div>
            </div>
            <input type="hidden" id="id_usuarioCrear" name="id_usuarioCrear">
            <div class="flex flex-col md:flex-row gap-2 mt-2 mb-2 w-full items-center justify-center ">
                <button type="submit"
                    class="bg-color5 text-color1 p-2 rounded w-full font-semibold hover:bg-color6 transition text-sm sm:text-sm text-center">Crear</button>
                <button type="button" id="closeModalCrear"
                    class="bg-color2 p-2 rounded w-full font-semibold text-color4 hover:bg-color3 transition text-sm sm:text-sm text-center">Cancelar</button>
            </div>
        </form>
    </div>
    <!-- Modal Ver -->
    <div id="modalVer" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white p-4 sm:p-8 rounded-lg shadow-lg w-full max-w-lg border-2 border-color5 relative
        flex flex-col justify-center
        h-full max-h-screen
        sm:h-auto sm:max-h-none
        overflow-y-auto">
            <button type="button" id="closeModalVer"
                class="absolute top-4 right-4 text-color7 text-xl sm:text-2xl font-bold hover:text-red-700">&times;</button>

            <div class="flex flex-col items-center mb-6">
                <img id="verFoto" src="/tk/src/assets/images/perfiles/default.png" alt="Foto de perfil"
                    class="w-24 h-24 sm:w-28 sm:h-28 rounded-full object-cover border-4 border-color5 mb-4" />
                <h2 class="font-bold text-color4 text-center mb-1 text-base sm:text-base md:text-base lg:text-lg"
                    id="verNombreCompleto"></h2>
                <div class="text-base sm:text-base md:text-base lg:text-base text-gray-600 text-center mb-1"
                    id="verEmail">
                </div>
                <span
                    class="inline-block bg-color6 text-white px-3 py-1 rounded mb-2 text-sm sm:text-base md:text-base lg:text-sm"
                    id="verRol"></span>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-2 mb-6">
                <div class="bg-gray-100 rounded p-3 border border-gray-200 text-center">
                    <span
                        class="font-semibold text-color5 text-sm sm:text-sm md:text-base lg:text-base">Documento:</span>
                    <div class="text-gray-700 text-center text-sm sm:text-sm md:text-base lg:text-base"
                        id="verDocumento"></div>
                </div>
                <div class="bg-gray-100 rounded p-3 border border-gray-200 text-center">
                    <span
                        class="font-semibold text-color5 text-sm sm:text-sm md:text-base lg:text-base">Teléfono:</span>
                    <div class="text-gray-700 text-center text-sm sm:text-sm md:text-base lg:text-base"
                        id="verTelefono"></div>
                </div>
                <div class="bg-gray-100 rounded p-3 border border-gray-200 text-center">
                    <span
                        class="font-semibold text-color5 text-sm sm:text-sm md:text-base lg:text-base">Departamento:</span>
                    <div class="text-gray-700 text-center text-sm sm:text-sm md:text-base lg:text-base"
                        id="verDepartamento"></div>
                </div>
                <div class="bg-gray-100 rounded p-3 border border-gray-200 text-center">
                    <span
                        class="font-semibold text-color5 text-sm sm:text-sm md:text-base lg:text-base">Municipio:</span>
                    <div class="text-gray-700 text-center text-sm sm:text-sm md:text-base lg:text-base"
                        id="verMunicipio"></div>
                </div>
            </div>

            <div class="text-center mt-4">
                <button type="button" id="closeModalVerBtn"
                    class="bg-gray-300 p-2 rounded w-40 font-semibold text-color4 hover:bg-gray-400 transition text-base sm:text-base md:text-base lg:text-base">Cerrar</button>
            </div>
        </div>
    </div>
    <!-- modal estado de usuario -->
    <div id="modalEstadoUsuario"
        class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">

        <div
            class="bg-white p-4 sm:p-6 md:p-8 m-2 sm:m-6 md:m-8 rounded-2xl shadow-2xl w-[90vw] sm:w-[400px] md:w-[450px] max-w-full text-center border-2 border-color5 relative flex flex-col items-center">
            <div class="flex items-center justify-center mb-4">
                <span id="modalEstadoUsuarioIcon" class="text-3xl sm:text-4xl md:text-5xl"></span>
            </div>
            <h2 class="font-bold text-color4 text-base sm:text-base md:text-base mb-2">Cambiar estado</h2>
            <p id="modalEstadoUsuarioTexto" class="text-color4 text-sm sm:text-sm md:text-base mb-6">
                ¿Seguro que deseas cambiar el estado de este usuario?
            </p>
            <div class="flex justify-center gap-4 w-full">
                <button id="btnEstadoUsuarioConfirmar" class="flex items-center justify-center gap-2 px-5 py-2 rounded-lg font-semibold text-sm sm:text-sm md:text-base transition duration-200 shadow
                bg-green-600 hover:bg-green-700 text-white border-2 border-green-600">
                    <i id="modalEstadoUsuarioConfirmarIcon" class="fas fa-user-check"></i>
                    <span id="modalEstadoUsuarioConfirmarText">Habilitar</span>
                </button>
                <button id="btnEstadoUsuarioCancelar" class="flex items-center justify-center gap-2 px-5 py-2 rounded-lg font-semibold text-sm sm:text-sm md:text-base transition duration-200 shadow
                bg-color1 hover:bg-color2 text-color4 border-2 border-color4">
                    <i class="fas fa-times"></i>
                    Cancelar
                </button>
            </div>
        </div>
    </div>

    <!-- Mensaje cambios exitosos -->
    <div id="modalMensaje"
        class="hidden fixed inset-0 flex items-center justify-center z-[100] bg-black bg-opacity-60 backdrop-blur-sm transition-all duration-300">
        <div id="mensajeBox" class="rounded-xl shadow-lg px-6 py-6 w-[90vw] max-w-sm mx-auto text-center
        border-2 border-color5 bg-white flex flex-col items-center gap-3">
            <!-- Loader animado -->
            <div class="flex items-center justify-center mb-2">
                <svg class="animate-spin h-7 w-7 text-color5" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"
                        fill="none"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
                </svg>
            </div>
            <!-- Mensaje dinámico -->
            <span id="mensajeTexto" class="block font-semibold text-color4 text-base"></span>
        </div>
    </div>

    <!-- ----------------------------->
    <!-- Modales para CRUD de roles -->
    <!-- ----------------------------->

    <!-- Modal Editar Rol -->
    <div id="modalEditarRol" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <form id="formEditarRol"
            class="bg-white p-6 rounded-lg shadow-lg w-full max-w-md border-2 border-color5 flex flex-col items-center">
            <h2 class="text-lg font-bold text-color4 mb-2 flex items-center justify-center">
                <i class="fas fa-user-shield mr-2"></i> Editar Rol
            </h2>
            <p class="text-center text-color6 mb-4 text-sm w-full">Modifica la descripción del rol.</p>
            <div class="mb-4 w-full">
                <label for="descripcionEditarRol"
                    class="font-bold text-color4 mb-1 block text-sm text-center w-full">Descripción</label>
                <input type="text" id="descripcionEditarRol" name="descripcionEditarRol" required
                    class="mb-2 w-full rounded bg-gray-100 p-2 text-color4 font-medium text-sm text-center">
            </div>
            <input type="hidden" id="id_rolEditar" name="id_rolEditar">
            <div class="flex gap-2 mt-2 w-full items-center justify-center">
                <button type="submit"
                    class="bg-color5 text-white p-2 rounded w-full font-bold hover:bg-color6 transition text-sm text-center">Guardar</button>
                <button type="button" id="closeModalEditarRol"
                    class="bg-gray-300 p-2 rounded w-full font-bold text-color4 hover:bg-gray-400 transition text-sm text-center">Cancelar</button>
            </div>
        </form>
    </div>
    <!-- Modal Ver Rol -->
    <div id="modalVerRol" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div
            class="bg-white p-6 rounded-lg shadow-lg w-full max-w-md border-2 border-color5 flex flex-col items-center">
            <h2 class="font-bold text-color4 mb-2 text-lg flex items-center justify-center">
                <i class="fas fa-user-shield mr-2"></i> Ver Rol
            </h2>
            <div class="mb-4 w-full">
                <label class="font-bold text-color5 mb-1 block text-sm text-center w-full">Descripción</label>
                <div id="descripcionVerRol" class="text-color4 text-center text-base"></div>
            </div>
            <div class="mb-2 w-full">
                <label class="font-bold text-color5 mb-1 block text-sm text-center w-full">Estado</label>
                <span id="estadoVerRol" class="inline-block px-3 py-1 rounded text-sm"></span>
            </div>
            <button type="button" id="closeModalVerRol"
                class="bg-gray-300 p-2 rounded w-full font-semibold text-color4 hover:bg-gray-400 transition text-base">Cerrar</button>
        </div>
    </div>
    <!-- Modal Cambiar Estado Rol -->
    <div id="modalEstadoRol" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div
            class="bg-white p-6 rounded-lg shadow-lg w-full max-w-md border-2 border-color5 flex flex-col items-center">
            <div class="flex items-center justify-center mb-4">
                <span id="modalEstadoRolIcon" class="text-4xl"></span>
            </div>
            <h2 class="font-bold text-color4 text-base mb-2">Cambiar estado del rol</h2>
            <p id="modalEstadoRolTexto" class="text-color4 text-sm mb-6">
                ¿Seguro que deseas cambiar el estado de este rol?
            </p>
            <div class="flex justify-center gap-4 w-full">
                <button id="btnEstadoRolConfirmar" class="flex items-center justify-center gap-2 px-5 py-2 rounded-lg font-semibold text-sm transition duration-200 shadow
        bg-green-600 hover:bg-green-700 text-white border-2 border-green-600">
                    <i id="modalEstadoRolConfirmarIcon" class="fas fa-check"></i>
                    <span id="modalEstadoRolConfirmarText">Activar</span>
                </button>
                <button id="btnEstadoRolCancelar" class="flex items-center justify-center gap-2 px-5 py-2 rounded-lg font-semibold text-sm transition duration-200 shadow
        bg-color1 hover:bg-color2 text-color4 border-2 border-color4">
                    <i class="fas fa-times"></i>
                    Cancelar
                </button>
            </div>
        </div>
    </div>
    <!-- Modal Mensaje (éxito/error) -->
    <div id="modalMensajeRol"
        class="hidden fixed inset-0 flex items-center justify-center z-[100] bg-black bg-opacity-60 backdrop-blur-sm transition-all duration-300">
        <div id="mensajeBoxRol" class="rounded-xl shadow-lg px-6 py-6 w-[90vw] max-w-sm mx-auto text-center
    border-2 border-color5 bg-white flex flex-col items-center gap-3">
            <div class="flex items-center justify-center mb-2">
                <svg class="animate-spin h-7 w-7 text-color5" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"
                        fill="none"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
                </svg>
            </div>
            <span id="mensajeTextoRol" class="block font-semibold text-color4 text-base"></span>
        </div>
    </div>

    <!-- ---------------------------------->
    <!-- Modales para CRUD de tipologias -->
    <!-- ---------------------------------->

    <!-- Modal Crear Tipología -->
    <div id="modalCrearTipologia"
        class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <form id="formCrearTipologia"
            class="bg-white p-4 rounded-lg shadow-lg w-full max-w-md border-2 border-color5 flex flex-col items-center">
            <h2 class="text-lg font-bold text-color4 mb-2 flex items-center justify-center">
                <i class="fas fa-layer-group mr-2"></i> Crear Tipología
            </h2>
            <div class="mb-2 w-full">
                <label for="tipologiaCrear"
                    class="font-bold text-color4 mb-1 block text-sm text-center w-full">Tipología</label>
                <select id="tipologiaCrear" name="tipologiaCrear"
                    class="mb-2 w-full rounded bg-gray-100 p-2 text-color4 font-medium text-sm text-center">
                    <!-- Opciones dinámicas desde la base de datos -->
                </select>
            </div>
            <div class="mb-2 w-full">
                <label for="subtipologiaCrear"
                    class="font-bold text-color4 mb-1 block text-sm text-center w-full">Subtipología</label>
                <input type="text" id="subtipologiaCrear" name="subtipologiaCrear" required
                    class="mb-2 w-full rounded bg-gray-100 p-2 text-color4 font-medium text-sm text-center">
            </div>
            <div class="mb-2 w-full">
                <label for="rolCrearTipologia"
                    class="font-bold text-color4 mb-1 block text-sm text-center w-full">Rol</label>
                <select id="rolCrearTipologia" name="rolCrearTipologia"
                    class="mb-2 w-full rounded bg-gray-100 p-2 text-color4 font-medium text-sm text-center">
                    <!-- Opciones dinámicas desde la base de datos -->
                </select>
            </div>
            <div class="mb-2 w-full">
                <label for="estadoTipologiaCrear"
                    class="font-bold text-color4 mb-1 block text-sm text-center w-full">Estado</label>
                <select id="estadoTipologiaCrear" name="estadoTipologiaCrear"
                    class="mb-2 w-full rounded bg-gray-100 p-2 text-color4 font-medium text-sm text-center">
                    <option value="Activo">Activo</option>
                    <option value="Inactivo">Inactivo</option>
                </select>
            </div>
            <div class="flex gap-2 mt-2 w-full items-center justify-center">
                <button type="submit"
                    class="bg-color5 text-white p-2 rounded w-full font-bold hover:bg-color6 transition text-sm text-center">Crear</button>
                <button type="button" id="closeModalCrearTipologia"
                    class="bg-gray-300 p-2 rounded w-full font-bold text-color4 hover:bg-gray-400 transition text-sm text-center">Cancelar</button>
            </div>
        </form>
    </div>

    <!-- Modal Editar Tipología -->
    <div id="modalEditarTipologia"
        class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <form id="formEditarTipologia"
            class="bg-white p-4 rounded-lg shadow-lg w-full max-w-md border-2 border-color5 flex flex-col items-center">
            <h2 class="text-lg font-bold text-color4 mb-2 flex items-center justify-center">
                <i class="fas fa-edit mr-2"></i> Editar Tipología
            </h2>
            <div class="mb-2 w-full">
                <label for="tipologiaEditar"
                    class="font-bold text-color4 mb-1 block text-sm text-center w-full">Tipología</label>
                <select id="tipologiaEditar" name="tipologiaEditar"
                    class="mb-2 w-full rounded bg-gray-100 p-2 text-color4 font-medium text-sm text-center">
                    <!-- Opciones dinámicas desde la base de datos -->
                </select>
            </div>
            <div class="mb-2 w-full">
                <label for="subtipologiaEditar"
                    class="font-bold text-color4 mb-1 block text-sm text-center w-full">Subtipología</label>
                <input type="text" id="subtipologiaEditar" name="subtipologiaEditar" required
                    class="mb-2 w-full rounded bg-gray-100 p-2 text-color4 font-medium text-sm text-center">
            </div>
            <div class="mb-2 w-full">
                <label for="rolEditarTipologia"
                    class="font-bold text-color4 mb-1 block text-sm text-center w-full">Rol</label>
                <select id="rolEditarTipologia" name="rolEditarTipologia"
                    class="mb-2 w-full rounded bg-gray-100 p-2 text-color4 font-medium text-sm text-center">
                    <!-- Opciones dinámicas desde la base de datos -->
                </select>
            </div>
            <div class="mb-2 w-full">
                <label for="estadoTipologiaEditar"
                    class="font-bold text-color4 mb-1 block text-sm text-center w-full">Estado</label>
                <select id="estadoTipologiaEditar" name="estadoTipologiaEditar"
                    class="mb-2 w-full rounded bg-gray-100 p-2 text-color4 font-medium text-sm text-center">
                    <option value="Activo">Activo</option>
                    <option value="Inactivo">Inactivo</option>
                </select>
            </div>
            <input type="hidden" id="id_tipologiaEditar" name="id_tipologiaEditar">
            <div class="flex gap-2 mt-2 w-full items-center justify-center">
                <button type="submit"
                    class="bg-color5 text-white p-2 rounded w-full font-bold hover:bg-color6 transition text-sm text-center">Guardar</button>
                <button type="button" id="closeModalEditarTipologia"
                    class="bg-gray-300 p-2 rounded w-full font-bold text-color4 hover:bg-gray-400 transition text-sm text-center">Cancelar</button>
            </div>
        </form>
    </div>

    <!-- Modal Ver Tipología -->
    <div id="modalVerTipologia"
        class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div
            class="bg-white p-4 rounded-lg shadow-lg w-full max-w-md border-2 border-color5 flex flex-col items-center">
            <h2 class="text-lg font-bold text-color4 mb-2 flex items-center justify-center">
                <i class="fas fa-eye mr-2"></i> Ver Tipología
            </h2>
            <div class="mb-2 w-full">
                <label class="font-bold text-color4 mb-1 block text-sm text-center w-full">Tipología</label>
                <div id="verTipologia" class="text-color4 text-center text-base"></div>
            </div>
            <div class="mb-2 w-full">
                <label class="font-bold text-color4 mb-1 block text-sm text-center w-full">Subtipología</label>
                <div id="verSubtipologia" class="text-color4 text-center text-base"></div>
            </div>
            <div class="mb-2 w-full">
                <label class="font-bold text-color4 mb-1 block text-sm text-center w-full">Rol</label>
                <div id="verRolTipologia" class="text-color4 text-center text-base"></div>
            </div>
            <div class="mb-2 w-full">
                <label class="font-bold text-color4 mb-1 block text-sm text-center w-full">Estado</label>
                <div id="verEstadoTipologia" class="text-color4 text-center text-base"></div>
            </div>
            <div class="flex gap-2 mt-2 w-full items-center justify-center">
                <button type="button" id="closeModalVerTipologia"
                    class="bg-gray-300 p-2 rounded w-full font-bold text-color4 hover:bg-gray-400 transition text-sm text-center">Cerrar</button>
            </div>
        </div>
    </div>

    <!-- Modal Cambiar Estado Tipología -->
    <div id="modalEstadoTipologia"
        class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div
            class="bg-white p-4 rounded-lg shadow-lg w-full max-w-md border-2 border-color5 flex flex-col items-center">
            <div class="flex items-center justify-center mb-4">
                <span id="modalEstadoTipologiaIcon" class="text-4xl"></span>
            </div>
            <h2 class="font-bold text-color4 text-base mb-2">Cambiar estado de la tipología</h2>
            <p id="modalEstadoTipologiaTexto" class="text-color4 text-sm mb-6">
                ¿Seguro que deseas cambiar el estado de esta tipología?
            </p>
            <div class="flex justify-center gap-4 w-full">
                <button id="btnEstadoTipologiaConfirmar" class="flex items-center justify-center gap-2 px-5 py-2 rounded-lg font-semibold text-sm transition duration-200 shadow
            bg-green-600 hover:bg-green-700 text-white border-2 border-green-600">
                    <i id="modalEstadoTipologiaConfirmarIcon" class="fas fa-check"></i>
                    <span id="modalEstadoTipologiaConfirmarText">Activar</span>
                </button>
                <button id="btnEstadoTipologiaCancelar" class="flex items-center justify-center gap-2 px-5 py-2 rounded-lg font-semibold text-sm transition duration-200 shadow
            bg-color1 hover:bg-color2 text-color4 border-2 border-color4">
                    <i class="fas fa-times"></i>
                    Cancelar
                </button>
            </div>
        </div>
    </div>

    

    <!-- Modal de confirmación para cerrar sesión al presionar atrás -->
    <div id="modal-logout-confirm"
        class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm hidden">
        <div class="bg-white rounded-xl shadow-2xl p-8 max-w-xs w-full text-center border-2 border-color6">
            <h2 class="text-xl font-bold text-color6 mb-2">¿Desea cerrar sesión?</h2>
            <p class="text-color3 mb-4 text-sm">Si confirma, se cerrará su sesión y volverá al inicio.</p>
            <div class="flex justify-center gap-4 mt-4">
                <button id="btnLogoutConfirmSi" class="bg-color6 text-white px-4 py-2 rounded font-bold">Sí</button>
                <button id="btnLogoutConfirmNo" class="bg-gray-300 px-4 py-2 rounded font-bold text-color4">No</button>
            </div>
        </div>
    </div>

    <!-- ------------------------->
    <!-- Modal cierre de sesion -->
    <!-- ------------------------->
    <div id="modal-logout-placeholder"></div>



    <script type="module" src="/tk/src/assets/js/pages/usuarios.js"></script>
    <script type="module" src="/tk/src/assets/js/pages/roles.js"></script>
    <script type="module" src="/tk/src/assets/js/pages/permisos.js"></script>
    <script type="module" src="/tk/src/assets/js/pages/dashboard.js"></script>
    <script type="module" src="/tk/src/assets/js/pages/profile.js"></script>
    <script type="module" src="/tk/src/assets/js/pages/tipologias.js"></script>
    <script type="module" src="/tk/src/assets/js/modals/modal-logout.js"></script>


    <script src="/tk/src/assets/js/utils/loadPartials.js"></script>
    <script src="/tk/src/assets/js/utils/menu.js"></script>
    <script src="/tk/src/assets/js/utils/departamentos.js"></script>
</body>

</html>